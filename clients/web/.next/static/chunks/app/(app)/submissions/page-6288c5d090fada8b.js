(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[490],{20714:function(e,t,o){Promise.resolve().then(o.bind(o,2404))},2404:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return p}});var s=o(89075),a=o(50511),l=o(19894),r=o(24637),n=o(34562),i=o(47294),c=o(99598),u=o(24097);let d=["All","Accepted","Wrong Answer","Time Limit Exceeded","Runtime Error"],m=["All","Easy","Medium","Hard"];function p(){let{userId:e}=(0,l.useAuth)(),[t,o]=(0,a.useState)(!0),[p,g]=(0,a.useState)([]),[h,f]=(0,a.useState)("All"),[x,y]=(0,a.useState)("All"),[v,b]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async function(){if(e){o(!0);try{let t=await r.K.getSubmissions(e,{limit:100,status:"All"===h?void 0:h,difficulty:"All"===x?void 0:x});g(t)}catch(e){console.error("Failed to load submissions:",e)}finally{o(!1)}}})()},[e,h,x]),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Submissions"}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("select",{value:h,onChange:e=>f(e.target.value),className:"input py-1.5 px-3 text-sm w-auto",children:d.map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)("select",{value:x,onChange:e=>y(e.target.value),className:"input py-1.5 px-3 text-sm w-auto",children:m.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]})]}),(0,s.jsx)("div",{className:"card overflow-hidden",children:t?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-pulse text-slate-500",children:"Loading submissions..."})}):0===p.length?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("p",{className:"text-slate-500",children:"No submissions found."})}):(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"text-left py-3 px-4 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Problem"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Difficulty"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Status"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Language"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Runtime"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Submitted"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:p.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30 cursor-pointer",onClick:()=>b(e),children:[(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsx)("a",{href:"https://leetcode.com/problems/".concat(e.problem_slug,"/"),target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"font-medium text-slate-900 dark:text-white hover:text-brand-600",children:e.problem_title})}),(0,s.jsx)("td",{className:"py-3 px-4",children:e.difficulty&&(0,s.jsx)(n.B,{difficulty:e.difficulty})}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsx)(i.O,{status:e.status})}),(0,s.jsx)("td",{className:"py-3 px-4 text-sm text-slate-600 dark:text-slate-400",children:e.language||"-"}),(0,s.jsx)("td",{className:"py-3 px-4 text-sm text-slate-600 dark:text-slate-400",children:e.runtime_ms?"".concat(e.runtime_ms,"ms"):"-"}),(0,s.jsx)("td",{className:"py-3 px-4 text-sm text-slate-500",children:(0,c.Q)(new Date(e.submitted_at),{addSuffix:!0})})]},e.id))})]})}),v&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>b(null),children:(0,s.jsxs)("div",{className:"card max-w-4xl w-full max-h-[80vh] overflow-hidden flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:v.problem_title}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsx)(i.O,{status:v.status}),v.difficulty&&(0,s.jsx)(n.B,{difficulty:v.difficulty}),(0,s.jsx)("span",{className:"text-sm text-slate-500",children:(0,u.WU)(new Date(v.submitted_at),"PPp")})]})]}),(0,s.jsx)("button",{onClick:()=>b(null),className:"text-slate-400 hover:text-slate-600",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("div",{className:"p-4 overflow-auto flex-1",children:v.code?(0,s.jsx)("pre",{className:"bg-slate-900 text-slate-100 p-4 rounded-lg text-sm overflow-x-auto",children:(0,s.jsx)("code",{children:v.code})}):(0,s.jsx)("p",{className:"text-slate-500",children:"No code available for this submission."})})]})})]})}},34562:function(e,t,o){"use strict";o.d(t,{B:function(){return l}});var s=o(89075),a=o(68273);function l(e){let{difficulty:t,className:o}=e;return(0,s.jsx)("span",{className:(0,a.W)(o,"Easy"===t&&"badge-easy","Medium"===t&&"badge-medium","Hard"===t&&"badge-hard"),children:t})}},47294:function(e,t,o){"use strict";o.d(t,{O:function(){return l}});var s=o(89075),a=o(68273);function l(e){let{status:t,className:o}=e,l="Accepted"===t;return(0,s.jsx)("span",{className:(0,a.W)(o,l?"badge-accepted":"badge-failed"),children:t})}},19894:function(e,t,o){"use strict";o.r(t),o.d(t,{AuthProvider:function(){return p},useAuth:function(){return g}});var s=o(89075),a=o(50511),l=o(52453);let r=null,n=async(e,t,o)=>await o(),i={SESSION_BRIDGE:"leetloop_session_bridge"},c={AUTH_CHANGE:"leetloop:auth-change",SIGNED_OUT:"leetloop:signed-out",GUEST_ID:"leetloop:guest-id"};function u(e){if(console.log("[LeetLoop Web] storeSessionBridge called, hasSession:",!!e),(null==e?void 0:e.access_token)&&(null==e?void 0:e.refresh_token)){let t={access_token:e.access_token,refresh_token:e.refresh_token};localStorage.setItem(i.SESSION_BRIDGE,JSON.stringify(t)),console.log("[LeetLoop Web] Session bridge stored in localStorage"),window.dispatchEvent(new CustomEvent(c.AUTH_CHANGE,{detail:t})),console.log("[LeetLoop Web] Dispatched auth-change event")}else localStorage.removeItem(i.SESSION_BRIDGE)}function d(){localStorage.removeItem(i.SESSION_BRIDGE),window.dispatchEvent(new CustomEvent(c.SIGNED_OUT))}let m=(0,a.createContext)(void 0);function p(e){let{children:t}=e,[o,i]=(0,a.useState)(null),[p,g]=(0,a.useState)(null),[x,y]=(0,a.useState)(!0),v=(0,a.useMemo)(()=>r||(r=(0,l.createBrowserClient)("https://ewezpbczwioxyflyffyy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV3ZXpwYmN6d2lveHlmbHlmZnl5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkzMDI3MzAsImV4cCI6MjA4NDg3ODczMH0.XxVIJRRYNR_IdMhVN0gGMVYghb19Uyly4rbwxJJKDVg",{auth:{flowType:"pkce",detectSessionInUrl:!0,persistSession:!0,debug:!1,lock:n}})),[]),b=(null==o?void 0:o.id)||h();(0,a.useEffect)(()=>{let e=!0,t=null;(async()=>{try{let{data:{session:o}}=await v.auth.getSession();if(e){var t;g(o),i(null!==(t=null==o?void 0:o.user)&&void 0!==t?t:null),y(!1),u(o)}}catch(t){t instanceof Error&&"AbortError"===t.name?console.log("[LeetLoop] Ignoring AbortError in dev mode"):console.error("[LeetLoop] Error getting session:",t),e&&y(!1)}})();let o=h();o&&window.dispatchEvent(new CustomEvent(c.GUEST_ID,{detail:o}));try{let{data:o}=v.auth.onAuthStateChange(async(t,o)=>{if(e){var s;g(o),i(null!==(s=null==o?void 0:o.user)&&void 0!==s?s:null),y(!1),u(o),"SIGNED_IN"===t&&(null==o?void 0:o.user)&&await f(v,o.user.id),"SIGNED_OUT"===t&&d()}});t=o.subscription}catch(e){console.error("[LeetLoop] Error setting up auth listener:",e)}return()=>{e=!1,null==t||t.unsubscribe()}},[v]);let S=async(e,t)=>{let{error:o}=await v.auth.signInWithPassword({email:e,password:t});if(o)throw o},_=async(e,t)=>{let{error:o}=await v.auth.signUp({email:e,password:t});if(o)throw o},L=async()=>{let{error:e}=await v.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(e)throw e},w=async()=>{let{error:e}=await v.auth.signOut();if(e)throw e;d()};return(0,s.jsx)(m.Provider,{value:{user:o,session:p,userId:b,loading:x,signIn:S,signUp:_,signInWithGoogle:L,signOut:w},children:t})}function g(){let e=(0,a.useContext)(m);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function h(){let e=localStorage.getItem("leetloop_user_id");return e||(e=crypto.randomUUID(),localStorage.setItem("leetloop_user_id",e)),e}async function f(e,t){if("true"===localStorage.getItem("leetloop_migration_complete")){console.log("[LeetLoop] Migration already marked complete, skipping"),console.log('[LeetLoop] To retry migration, run: localStorage.removeItem("leetloop_migration_complete")');return}let o=localStorage.getItem("leetloop_user_id");if(!o){console.log("[LeetLoop] No guest user ID found, nothing to migrate"),localStorage.setItem("leetloop_migration_complete","true");return}if(o===t){console.log("[LeetLoop] Guest ID matches auth ID, no migration needed"),localStorage.setItem("leetloop_migration_complete","true");return}console.log("[LeetLoop] Starting migration..."),console.log("[LeetLoop] Guest UUID:",o),console.log("[LeetLoop] Auth User ID:",t);try{let{data:s,error:a}=await e.rpc("migrate_guest_to_auth",{p_guest_id:o,p_auth_id:t});if(a){console.error("[LeetLoop] Migration RPC error:",a),console.error("[LeetLoop] Error code:",a.code),console.error("[LeetLoop] Error message:",a.message),console.error("[LeetLoop] Error details:",a.details),console.error("[LeetLoop] Migration NOT marked complete due to error"),console.error("[LeetLoop] You can manually migrate by running SQL in Supabase:"),console.error("UPDATE submissions SET user_id = '".concat(t,"' WHERE user_id = '").concat(o,"';")),console.error("UPDATE skill_scores SET user_id = '".concat(t,"' WHERE user_id = '").concat(o,"';")),console.error("UPDATE review_queue SET user_id = '".concat(t,"' WHERE user_id = '").concat(o,"';"));return}if(!s||"object"!=typeof s){console.error("[LeetLoop] Migration returned unexpected data:",s),console.error("[LeetLoop] Migration NOT marked complete due to unexpected response");return}if(!0!==s.success){console.error("[LeetLoop] Migration returned success=false:",s),console.error("[LeetLoop] Migration NOT marked complete");return}console.log("[LeetLoop] Migration successful!"),console.log("[LeetLoop] Migrated counts:",s.migrated),localStorage.setItem("leetloop_migration_complete","true"),localStorage.setItem("leetloop_user_id",t),console.log("[LeetLoop] Updated local user ID to auth ID")}catch(e){console.error("[LeetLoop] Migration exception:",e),console.error("[LeetLoop] Migration NOT marked complete due to exception"),console.error("[LeetLoop] Guest UUID for manual migration:",o),console.error("[LeetLoop] Auth User ID for manual migration:",t)}}window.resetLeetLoopMigration=()=>{localStorage.removeItem("leetloop_migration_complete"),console.log("[LeetLoop] Migration flag cleared. Sign out and back in to retry migration.")},window.getLeetLoopMigrationInfo=()=>{console.log("[LeetLoop] Migration complete:",localStorage.getItem("leetloop_migration_complete")),console.log("[LeetLoop] Guest user ID:",localStorage.getItem("leetloop_user_id"))}},24637:function(e,t,o){"use strict";o.d(t,{K:function(){return r}});class s extends Error{constructor(e,t){super(t),this.status=e,this.name="ApiError"}}async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{timeout:o=3e4,...s}=t,a=new AbortController,l=setTimeout(()=>a.abort(),o);try{return await fetch(e,{...s,signal:a.signal})}finally{clearTimeout(l)}}async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o="".concat("http://localhost:8081").concat(e),l=await a(o,{headers:{"Content-Type":"application/json",...t.headers},...t});if(!l.ok){let e=await l.json().catch(()=>({detail:"Unknown error"}));throw new s(l.status,e.detail||l.statusText)}return l.json()}let r={health:()=>l("/health"),getProgress:e=>l("/api/progress/".concat(e)),getStats:e=>l("/api/progress/".concat(e,"/stats")),getSkillScores:e=>l("/api/progress/".concat(e,"/skills")),getSubmissions:(e,t)=>{let o=new URLSearchParams;(null==t?void 0:t.limit)&&o.set("limit",t.limit.toString()),(null==t?void 0:t.offset)&&o.set("offset",t.offset.toString()),(null==t?void 0:t.status)&&o.set("status",t.status),(null==t?void 0:t.difficulty)&&o.set("difficulty",t.difficulty),(null==t?void 0:t.tag)&&o.set("tag",t.tag);let s=o.toString();return l("/api/submissions/".concat(e).concat(s?"?".concat(s):""))},getRecommendations:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return l("/api/recommendations/".concat(e,"?limit=").concat(t))},getNextProblem:e=>l("/api/recommendations/".concat(e,"/next")),getReviews:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return l("/api/reviews/".concat(e,"?limit=").concat(t))},getReviewCount:e=>l("/api/reviews/".concat(e,"/count")),completeReview:(e,t)=>l("/api/reviews/".concat(e,"/complete"),{method:"POST",body:JSON.stringify({success:t})}),chat:function(e,t,o){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return l("/api/coaching/chat",{method:"POST",body:JSON.stringify({user_id:e,message:t,context:o,history:s})})},analyzeCode:(e,t,o,s,a,r)=>l("/api/coaching/analyze",{method:"POST",body:JSON.stringify({user_id:e,submission_id:t,code:o,language:s,problem_slug:a,status:r})}),getTips:e=>l("/api/coaching/tips/".concat(e)),getPaths:()=>l("/api/paths"),getPath:e=>l("/api/paths/".concat(e)),getPathProgress:(e,t)=>l("/api/paths/".concat(e,"/progress/").concat(t)),completeProblem:(e,t,o)=>l("/api/paths/".concat(e,"/complete/").concat(t),{method:"POST",body:JSON.stringify({problem_slug:o})}),setCurrentPath:(e,t)=>l("/api/users/".concat(e,"/current-path"),{method:"PUT",body:JSON.stringify({path_id:t})}),getCurrentPath:e=>l("/api/users/".concat(e,"/current-path")),getTodaysFocus:e=>l("/api/today/".concat(e)),getMastery:e=>l("/api/mastery/".concat(e)),getDomainDetail:(e,t)=>l("/api/mastery/".concat(e,"/").concat(encodeURIComponent(t)))}}},function(e){e.O(0,[453,138,97,852,999,744],function(){return e(e.s=20714)}),_N_E=e.O()}]);