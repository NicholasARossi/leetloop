(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[455],{6041:function(e,t,o){Promise.resolve().then(o.bind(o,97515))},97515:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return m}});var r=o(89075),s=o(50511),a=o(980),l=o(19894),n=o(24637);function i(e){let{completed:t,goal:o,size:s=120}=e,a=Math.min(t/o,1),l=(s-8)/2,n=2*Math.PI*l,i=t>=o;return(0,r.jsx)("div",{className:"flex flex-col items-center",children:(0,r.jsxs)("div",{className:"relative",style:{width:s,height:s},children:[(0,r.jsxs)("svg",{className:"absolute inset-0 -rotate-90",width:s,height:s,children:[(0,r.jsx)("circle",{cx:s/2,cy:s/2,r:l,fill:"none",stroke:"currentColor",strokeWidth:8,className:"text-slate-200 dark:text-slate-700"}),(0,r.jsx)("circle",{cx:s/2,cy:s/2,r:l,fill:"none",stroke:"currentColor",strokeWidth:8,strokeLinecap:"round",strokeDasharray:n,strokeDashoffset:n*(1-a),className:"transition-all duration-500 ".concat(i?"text-green-500":a>.5?"text-brand-500":"text-yellow-500")})]}),(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,r.jsxs)("span",{className:"text-2xl font-bold ".concat(i?"text-green-600 dark:text-green-400":"text-slate-900 dark:text-white"),children:[t,"/",o]}),(0,r.jsx)("span",{className:"text-xs text-slate-500",children:i?"Complete!":"daily goal"})]})]})})}function c(e){let{streak:t}=e,o=t>0;return(0,r.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 rounded-full ".concat(o?"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400":"bg-slate-100 dark:bg-slate-700 text-slate-500"),children:[(0,r.jsx)("span",{className:"text-xl",children:o?"\uD83D\uDD25":"\uD83D\uDCA4"}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"font-bold text-lg leading-tight",children:t}),(0,r.jsx)("span",{className:"text-xs leading-tight",children:1===t?"day":"days"})]})]})}var d=o(34562);let u={reviews:{header:"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",headerText:"text-red-700 dark:text-red-400",icon:"â°",badge:"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400"},path:{header:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",headerText:"text-blue-700 dark:text-blue-400",icon:"\uD83D\uDCDA",badge:"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400"},skills:{header:"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800",headerText:"text-yellow-700 dark:text-yellow-400",icon:"\uD83D\uDCAA",badge:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400"}};function g(e){let{title:t,problems:o,variant:s,emptyMessage:a}=e,l=u[s];return(0,r.jsxs)("div",{className:"card overflow-hidden",children:[(0,r.jsx)("div",{className:"px-4 py-3 border-b ".concat(l.header),children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-lg",children:l.icon}),(0,r.jsx)("h3",{className:"font-semibold ".concat(l.headerText),children:t}),(0,r.jsx)("span",{className:"ml-auto text-xs font-medium px-2 py-0.5 rounded-full ".concat(l.badge),children:o.length})]})}),(0,r.jsx)("div",{className:"p-4 space-y-3",children:0===o.length?(0,r.jsx)("p",{className:"text-sm text-slate-500 text-center py-4",children:a||"No problems"}):o.map((e,t)=>(0,r.jsxs)("a",{href:"https://leetcode.com/problems/".concat(e.slug,"/"),target:"_blank",rel:"noopener noreferrer",className:"block p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"font-medium text-slate-900 dark:text-white truncate",children:e.title}),(0,r.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:e.reason})]}),e.difficulty&&(0,r.jsx)(d.B,{difficulty:e.difficulty})]}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("span",{className:"text-xs bg-slate-200 dark:bg-slate-600 text-slate-600 dark:text-slate-300 px-2 py-0.5 rounded",children:e.category})})]},"".concat(e.slug,"-").concat(t)))})]})}function p(e){let{insight:t}=e;return t?(0,r.jsx)("div",{className:"card p-4 bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 border-purple-200 dark:border-purple-800",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCA1"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-purple-900 dark:text-purple-100 mb-1",children:"AI Insight"}),(0,r.jsx)("p",{className:"text-sm text-purple-800 dark:text-purple-200",children:t})]})]})}):null}function m(){let{userId:e}=(0,l.useAuth)(),[t,o]=(0,s.useState)(!0),[d,u]=(0,s.useState)(null),[m,h]=(0,s.useState)(null);if((0,s.useEffect)(()=>{(async function(){if(e){o(!0),u(null);try{let t=await n.K.getTodaysFocus(e);h(t)}catch(e){console.error("Failed to load today's focus:",e),u("Failed to load data. Make sure the backend is running.")}finally{o(!1)}}})()},[e]),t)return(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-pulse text-slate-500",children:"Loading today's focus..."})});if(d)return(0,r.jsxs)("div",{className:"card p-8 text-center",children:[(0,r.jsx)("p",{className:"text-red-500 mb-4",children:d}),(0,r.jsx)("p",{className:"text-sm text-slate-500",children:"Make sure the backend API is running."})]});if(!m)return null;let x=m.reviews_due.length+m.path_problems.length+m.skill_builders.length;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"card p-6",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsx)(i,{completed:m.completed_today,goal:m.daily_goal,size:100}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Today's Focus"}),(0,r.jsx)("p",{className:"text-slate-500 mt-1",children:x>0?"".concat(x," problem").concat(1!==x?"s":""," to work on"):"You're all caught up!"})]})]}),(0,r.jsx)(c,{streak:m.streak})]})}),(0,r.jsx)(p,{insight:m.llm_insight}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsx)(g,{title:"Reviews Due",problems:m.reviews_due,variant:"reviews",emptyMessage:"No reviews due today"}),(0,r.jsx)(g,{title:"Path Progress",problems:m.path_problems,variant:"path",emptyMessage:"Select a learning path to get started"}),(0,r.jsx)(g,{title:"Skill Builders",problems:m.skill_builders,variant:"skills",emptyMessage:"Complete more problems to get skill recommendations"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 justify-center",children:[(0,r.jsx)(a.default,{href:"/path",className:"btn-primary px-6 py-2",children:"View Path Progress"}),(0,r.jsx)(a.default,{href:"/mastery",className:"px-6 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:"Check Mastery"}),(0,r.jsx)(a.default,{href:"/reviews",className:"px-6 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:"All Reviews"})]})]})}},34562:function(e,t,o){"use strict";o.d(t,{B:function(){return a}});var r=o(89075),s=o(68273);function a(e){let{difficulty:t,className:o}=e;return(0,r.jsx)("span",{className:(0,s.W)(o,"Easy"===t&&"badge-easy","Medium"===t&&"badge-medium","Hard"===t&&"badge-hard"),children:t})}},19894:function(e,t,o){"use strict";o.r(t),o.d(t,{AuthProvider:function(){return p},useAuth:function(){return m}});var r=o(89075),s=o(50511),a=o(52453);let l=null,n=async(e,t,o)=>await o(),i={SESSION_BRIDGE:"leetloop_session_bridge"},c={AUTH_CHANGE:"leetloop:auth-change",SIGNED_OUT:"leetloop:signed-out",GUEST_ID:"leetloop:guest-id"};function d(e){if(console.log("[LeetLoop Web] storeSessionBridge called, hasSession:",!!e),(null==e?void 0:e.access_token)&&(null==e?void 0:e.refresh_token)){let t={access_token:e.access_token,refresh_token:e.refresh_token};localStorage.setItem(i.SESSION_BRIDGE,JSON.stringify(t)),console.log("[LeetLoop Web] Session bridge stored in localStorage"),window.dispatchEvent(new CustomEvent(c.AUTH_CHANGE,{detail:t})),console.log("[LeetLoop Web] Dispatched auth-change event")}else localStorage.removeItem(i.SESSION_BRIDGE)}function u(){localStorage.removeItem(i.SESSION_BRIDGE),window.dispatchEvent(new CustomEvent(c.SIGNED_OUT))}let g=(0,s.createContext)(void 0);function p(e){let{children:t}=e,[o,i]=(0,s.useState)(null),[p,m]=(0,s.useState)(null),[f,b]=(0,s.useState)(!0),y=(0,s.useMemo)(()=>l||(l=(0,a.createBrowserClient)("https://ewezpbczwioxyflyffyy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV3ZXpwYmN6d2lveHlmbHlmZnl5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkzMDI3MzAsImV4cCI6MjA4NDg3ODczMH0.XxVIJRRYNR_IdMhVN0gGMVYghb19Uyly4rbwxJJKDVg",{auth:{flowType:"pkce",detectSessionInUrl:!0,persistSession:!0,debug:!1,lock:n}})),[]),v=(null==o?void 0:o.id)||h();(0,s.useEffect)(()=>{let e=!0,t=null;(async()=>{try{let{data:{session:o}}=await y.auth.getSession();if(e){var t;m(o),i(null!==(t=null==o?void 0:o.user)&&void 0!==t?t:null),b(!1),d(o)}}catch(t){t instanceof Error&&"AbortError"===t.name?console.log("[LeetLoop] Ignoring AbortError in dev mode"):console.error("[LeetLoop] Error getting session:",t),e&&b(!1)}})();let o=h();o&&window.dispatchEvent(new CustomEvent(c.GUEST_ID,{detail:o}));try{let{data:o}=y.auth.onAuthStateChange(async(t,o)=>{if(e){var r;m(o),i(null!==(r=null==o?void 0:o.user)&&void 0!==r?r:null),b(!1),d(o),"SIGNED_IN"===t&&(null==o?void 0:o.user)&&await x(y,o.user.id),"SIGNED_OUT"===t&&u()}});t=o.subscription}catch(e){console.error("[LeetLoop] Error setting up auth listener:",e)}return()=>{e=!1,null==t||t.unsubscribe()}},[y]);let k=async(e,t)=>{let{error:o}=await y.auth.signInWithPassword({email:e,password:t});if(o)throw o},w=async(e,t)=>{let{error:o}=await y.auth.signUp({email:e,password:t});if(o)throw o},N=async()=>{let{error:e}=await y.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(e)throw e},_=async()=>{let{error:e}=await y.auth.signOut();if(e)throw e;u()};return(0,r.jsx)(g.Provider,{value:{user:o,session:p,userId:v,loading:f,signIn:k,signUp:w,signInWithGoogle:N,signOut:_},children:t})}function m(){let e=(0,s.useContext)(g);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function h(){let e=localStorage.getItem("leetloop_user_id");return e||(e=crypto.randomUUID(),localStorage.setItem("leetloop_user_id",e)),e}async function x(e,t){if("true"===localStorage.getItem("leetloop_migration_complete")){console.log("[LeetLoop] Migration already marked complete, skipping"),console.log('[LeetLoop] To retry migration, run: localStorage.removeItem("leetloop_migration_complete")');return}let o=localStorage.getItem("leetloop_user_id");if(!o){console.log("[LeetLoop] No guest user ID found, nothing to migrate"),localStorage.setItem("leetloop_migration_complete","true");return}if(o===t){console.log("[LeetLoop] Guest ID matches auth ID, no migration needed"),localStorage.setItem("leetloop_migration_complete","true");return}console.log("[LeetLoop] Starting migration..."),console.log("[LeetLoop] Guest UUID:",o),console.log("[LeetLoop] Auth User ID:",t);try{let{data:r,error:s}=await e.rpc("migrate_guest_to_auth",{p_guest_id:o,p_auth_id:t});if(s){console.error("[LeetLoop] Migration RPC error:",s),console.error("[LeetLoop] Error code:",s.code),console.error("[LeetLoop] Error message:",s.message),console.error("[LeetLoop] Error details:",s.details),console.error("[LeetLoop] Migration NOT marked complete due to error"),console.error("[LeetLoop] You can manually migrate by running SQL in Supabase:"),console.error("UPDATE submissions SET user_id = '".concat(t,"' WHERE user_id = '").concat(o,"';")),console.error("UPDATE skill_scores SET user_id = '".concat(t,"' WHERE user_id = '").concat(o,"';")),console.error("UPDATE review_queue SET user_id = '".concat(t,"' WHERE user_id = '").concat(o,"';"));return}if(!r||"object"!=typeof r){console.error("[LeetLoop] Migration returned unexpected data:",r),console.error("[LeetLoop] Migration NOT marked complete due to unexpected response");return}if(!0!==r.success){console.error("[LeetLoop] Migration returned success=false:",r),console.error("[LeetLoop] Migration NOT marked complete");return}console.log("[LeetLoop] Migration successful!"),console.log("[LeetLoop] Migrated counts:",r.migrated),localStorage.setItem("leetloop_migration_complete","true"),localStorage.setItem("leetloop_user_id",t),console.log("[LeetLoop] Updated local user ID to auth ID")}catch(e){console.error("[LeetLoop] Migration exception:",e),console.error("[LeetLoop] Migration NOT marked complete due to exception"),console.error("[LeetLoop] Guest UUID for manual migration:",o),console.error("[LeetLoop] Auth User ID for manual migration:",t)}}window.resetLeetLoopMigration=()=>{localStorage.removeItem("leetloop_migration_complete"),console.log("[LeetLoop] Migration flag cleared. Sign out and back in to retry migration.")},window.getLeetLoopMigrationInfo=()=>{console.log("[LeetLoop] Migration complete:",localStorage.getItem("leetloop_migration_complete")),console.log("[LeetLoop] Guest user ID:",localStorage.getItem("leetloop_user_id"))}},24637:function(e,t,o){"use strict";o.d(t,{K:function(){return l}});class r extends Error{constructor(e,t){super(t),this.status=e,this.name="ApiError"}}async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{timeout:o=3e4,...r}=t,s=new AbortController,a=setTimeout(()=>s.abort(),o);try{return await fetch(e,{...r,signal:s.signal})}finally{clearTimeout(a)}}async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o="".concat("http://localhost:8081").concat(e),a=await s(o,{headers:{"Content-Type":"application/json",...t.headers},...t});if(!a.ok){let e=await a.json().catch(()=>({detail:"Unknown error"}));throw new r(a.status,e.detail||a.statusText)}return a.json()}let l={health:()=>a("/health"),getProgress:e=>a("/api/progress/".concat(e)),getStats:e=>a("/api/progress/".concat(e,"/stats")),getSkillScores:e=>a("/api/progress/".concat(e,"/skills")),getSubmissions:(e,t)=>{let o=new URLSearchParams;(null==t?void 0:t.limit)&&o.set("limit",t.limit.toString()),(null==t?void 0:t.offset)&&o.set("offset",t.offset.toString()),(null==t?void 0:t.status)&&o.set("status",t.status),(null==t?void 0:t.difficulty)&&o.set("difficulty",t.difficulty),(null==t?void 0:t.tag)&&o.set("tag",t.tag);let r=o.toString();return a("/api/submissions/".concat(e).concat(r?"?".concat(r):""))},getRecommendations:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return a("/api/recommendations/".concat(e,"?limit=").concat(t))},getNextProblem:e=>a("/api/recommendations/".concat(e,"/next")),getReviews:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return a("/api/reviews/".concat(e,"?limit=").concat(t))},getReviewCount:e=>a("/api/reviews/".concat(e,"/count")),completeReview:(e,t)=>a("/api/reviews/".concat(e,"/complete"),{method:"POST",body:JSON.stringify({success:t})}),chat:function(e,t,o){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return a("/api/coaching/chat",{method:"POST",body:JSON.stringify({user_id:e,message:t,context:o,history:r})})},analyzeCode:(e,t,o,r,s,l)=>a("/api/coaching/analyze",{method:"POST",body:JSON.stringify({user_id:e,submission_id:t,code:o,language:r,problem_slug:s,status:l})}),getTips:e=>a("/api/coaching/tips/".concat(e)),getPaths:()=>a("/api/paths"),getPath:e=>a("/api/paths/".concat(e)),getPathProgress:(e,t)=>a("/api/paths/".concat(e,"/progress/").concat(t)),completeProblem:(e,t,o)=>a("/api/paths/".concat(e,"/complete/").concat(t),{method:"POST",body:JSON.stringify({problem_slug:o})}),setCurrentPath:(e,t)=>a("/api/users/".concat(e,"/current-path"),{method:"PUT",body:JSON.stringify({path_id:t})}),getCurrentPath:e=>a("/api/users/".concat(e,"/current-path")),getTodaysFocus:e=>a("/api/today/".concat(e)),getMastery:e=>a("/api/mastery/".concat(e)),getDomainDetail:(e,t)=>a("/api/mastery/".concat(e,"/").concat(encodeURIComponent(t)))}},68273:function(e,t,o){"use strict";function r(){for(var e,t,o=0,r="",s=arguments.length;o<s;o++)(e=arguments[o])&&(t=function e(t){var o,r,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t){if(Array.isArray(t)){var a=t.length;for(o=0;o<a;o++)t[o]&&(r=e(t[o]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r)}return s}(e))&&(r&&(r+=" "),r+=t);return r}o.d(t,{W:function(){return r}}),t.Z=r}},function(e){e.O(0,[453,980,852,999,744],function(){return e(e.s=6041)}),_N_E=e.O()}]);